<div>
  <div class="h4 text-left">Kruskal's Minimum/Maximum Spanning Tree</div>

  <div *ngIf="!solving" class="row menu">
    <div class="col-6 text-left">
      <div class="dropdown display-inline">
        <button class="btn btn-info dropdown-toggle" type="button" id="file" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          File
        </button>
        <div class="dropdown-menu" aria-labelledby="file">
          <a class="dropdown-item" data-toggle="modal" data-target="#saveModal" (click)="getStringFromGraph()">Save As Text File</a>
          <a class="dropdown-item" data-toggle="modal" data-target="#uploadModal">Upload Text File</a>
        </div>
      </div>

      <div class="dropdown display-inline">
        <button class="btn btn-info dropdown-toggle" type="button" id="kruskalExamples" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Examples
        </button>
        <div class="dropdown-menu" aria-labelledby="kruskalExamples">
          <a *ngFor="let g of exampleGraphs" class="dropdown-item" (click)="useExampleGraph(g)">{{ g.name }}</a>
        </div>
      </div>
    </div>

    <div class="col-6 text-right">
      <div class="display-inline">
        <button class="btn btn-info" type="button" data-toggle="modal" data-target="#problemModal">Problem</button>
      </div>

      <div class="display-inline">
        <button class="btn btn-info" type="button" data-toggle="modal" data-target="#hintModal">&#63;</button>
      </div>
    </div>
  </div>

  <hr>

  <div class="row col">
    <div id="cy" class="col-8"></div>
    <div class="col-4 text-center">
      <div *ngIf="!solving">
        <div>Number of vertices</div>
        <button (click)="decrementVertices()" [disabled]="numVertices <= 3" class="btn btn-danger margin-lr-5"><b>-</b></button>
        <div class="display-inline margin-lr-5">v = {{ numVertices }}</div>
        <button (click)="incrementVertices()" [disabled]="numVertices >= 8" class="btn btn-success margin-lr-5"><b>+</b></button>
      </div>
      <div *ngIf="!solving">
        <button (click)="generateRandomEdges()" class="btn btn-primary">Generate Random Edges</button>
      </div>
      <div *ngIf="!solving">
        <input [(ngModel)]="treeType.type" type="radio" value="min" name="treeType"> Min
        <input [(ngModel)]="treeType.type" type="radio" value="max" name="treeType"> Max
      </div>
      <div>
          <button (click)="slower()" [disabled]="!solving" class="btn btn-primary inline-block">Slower (&#xF7;2)</button>
          <button *ngIf="!solving" (click)="getKruskal()" class="btn btn-success margin-lr-5 inline-block">Run Algorithm</button>
          <button *ngIf="solving" (click)="pauseContinueKruskal()" class="btn btn-success margin-lr-5 inline-block">{{this.paused ? 'Run Algorithm' : 'Pause Algorithm'}}</button>
          <button (click)="faster()" [disabled]="!solving" class="btn btn-danger inline-block">Faster (&#215;2)</button>
          <div *ngIf="solving">Speed: &#215;{{ speed }}</div>
        </div>
      <div>
        <button (click)="previous()" *ngIf="isPrevious" [disabled]="previousSolving" class="btn btn-warning margin-lr-5">Previous</button>
        <button (click)="next()" *ngIf="isNext" [disabled]="nextSolving" class="btn btn-success margin-lr-5">Next</button>
      </div>
      <div *ngIf="solving && paused">
        <button (click)="reset()" class="btn btn-danger margin-lr-5">Reset</button>
      </div>
      <div *ngIf="messages.length" class="message">{{ messages[messages.length-1] }} : {{ messages.length }}</div>
      <div *ngIf="weightSum !== null">Total weight: {{ weightSum }}</div>
    </div>
  </div>
  <div class="row" *ngIf="solving">
    <div class="col-8">
      <div>Queue:</div>
      <div class="queue">
        <div *ngIf="before.length" class="inline-block">&#8594;</div>
        <div *ngFor="let b of before" class="queue-element">
          <div><b>Weight:</b> {{ b.weight }}</div>
          <div><b>V<sub>{{ b.source.key }}</sub></b> to <b>V<sub>{{ b.target.key }}</sub></b></div>
        </div>
        <div *ngIf="before.length" class="inline-block">&#8594;</div>
      </div>
    </div>
    <div class="col-4">
      <div>Current Edge:</div>
      <div *ngIf="edge !== null" class="current-edge">
        <div><b>Weight:</b> {{ edge.weight }}</div>
        <div><b>V<sub>{{ edge.source.key }}</sub></b> to <b>V<sub>{{ edge.target.key }}</sub></b></div>
      </div>
    </div>
  </div>

  <!-- modals -->
  <!-- hints -->
  <div class="modal fade" id="hintModal" tabindex="-1" role="dialog" aria-labelledby="hintModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="hintModalLabel">Hints</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ul>
            <li>Click on two vertices to add/remove an edge</li>
            <li>Click on the edge and type in a number (accepts unsigned double)</li>
            <li>Click and move vertices around if the edge weight is hidden</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- problem -->
  <div class="modal fade" id="problemModal" tabindex="-1" role="dialog" aria-labelledby="problemModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="problemModalLabel">Problem</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          ...
        </div>
      </div>
    </div>
  </div>

  <!-- save instance -->
  <div class="modal fade" id="saveModal" role="dialog" aria-labelledby="saveModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="saveModalLabel">Save As Text File</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div>
            <button class="btn btn-primary" (click)="saveAlgo()">Download Text File</button>
          </div>
          <div>
            <div>Or copy the text below</div>
            <textarea rows=6 cols=40 readonly>{{ graphString }}</textarea>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- upload instance -->
  <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadModalLabel">Upload Text File</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-6 container">
              <div class="rules">
                <h5>Rules</h5>
                <ul>
                  <li>NUMBERS ONLY</li>
                  <li>No repeating edges</li>
                  <li>Vertices are numbered from 0</li>
                  <li>All values are separated by exactly one space</li>
                  <li>No trailing spaces allowed</li>
                  <li>First line of input contains two values:</li>
                  <ul>
                    <li>The number of vertices</li>
                    <li>Min/Max represented by 0 or 1</li>
                    <ul>
                      <li>0 &mdash; min</li>
                      <li>1 &mdash; max</li>
                    </ul>
                  </ul>
                  <li>Every following line is in the following format: s t w</li>
                  <ul>
                    <li>s &mdash; edge source (vertice number)</li>
                    <li>t &mdash; edge target (vertice number)</li>
                    <li>w &mdash; weight of edge in the range [-500, 500]</li>
                    <li>Negatives and decimals are accepted for weight</li>
                  </ul>
                </ul>
              </div>
            </div>
            <div class="col-6">
              <div>
                Paste the graph instance text here
                <textarea [(ngModel)]="uploadText" rows=6 cols=40 placeholder="3 1&#10;0 1 5&#10;1 2 -1&#10;0 2 50"></textarea>
              </div>

              <div>Or upload a text file</div>
              <label class="btn btn-primary">
                Upload File
                <input type='file' (change)="readFile($event)" hidden>
              </label>
              <div *ngIf="uploadError" class="text-danger">Error in input</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button (click)="uploadAlgo()">Load</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
